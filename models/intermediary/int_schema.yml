version: 2

models:
  - name: dim_stores_devices
    description: This dim table combines the store and devices models
    columns:
      - name: store_id
        description: This is the id of the store, it only includes stores that have done a transaction 
        tests:
          - not_null
          - unique
      - name: device_id
        tests:
          - not_null
          - unique
  - name: fct_transactions
    description: Fact table that measures all transactions
    tests:
      - assert_date_value_in_column_a_is_greater_than_column_b:
            column_a: happened_at
            column_b: first_transaction
            or_equal: true 
         